#Rook：k8s中Ceph自动化工具

Rook是运行在k8s集群中自动化编排工具，在0.8版本中，Rook已经变成Beta发行版，如果还没有尝试过Rook，可以现在尝鲜。

Rook是什么，为什么很重要？Ceph运行在k8s集群中很久了，为什么要有这么大的变动？如果以前玩过ceph集群，肯定深知维护ceph集群的复杂性，Rook就是为此而生，使用k8s分布式平台简化大量针对Ceph存储的操作和维护工作。
Rook通过一个操作器(operator)完成，只需要定义需要的状态就可以了。rook通过操作器监控状态需求变化，并将配置文件分配到集群上生效。操作器关注包括各种集群运行和启停所需的状态信息。本文将详细讨论这些细节。

## Mons ##
Ceph集群中最重要的信息是Mons的quorum，一般集群中有有三个Mons，保持高可用以及quorum可用性以防数据不可用，当创建集群是，Rook将会：
 - 启动特定节点上的Mons,确保他们在quorum中
 - 定期确定Mons状态,确保他们在quorum中
 - 如果某个Mon出现故障，并且没有重新启动，操作器会往quorum中添加一个新的mon，并将失效的移除quorum
 - 更新Ceph客户端和Daemons的IP地址。


## mgr ##
mgr是一个无状态服务，提供集群信息。除了启动核心功能外，Rook还参与配置其它两个mgr插件：
 - 搜集prometheus状态
 - 启动Ceph面板，并启动服务点

## OSDs ##
集群中最具挑战的是OSD部分，存储部分的核心部件。


